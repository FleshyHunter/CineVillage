<%- include('../layouts/header') %>

<div class="container">
  <div class="movie-detail-container">
    
    <!-- Left Side: Movie Poster -->
    <div class="movie-detail-poster">
      <img src="<%= movie.pictureUrl || '/images/placeholder.jpg' %>" alt="<%= movie.name %>">
      <% if (movie.ageRestriction) { %>
        <div class="age-badge-detail"><%= movie.ageRestriction %></div>
      <% } %>
    </div>

    <!-- Right Side: Movie Information -->
    <div class="movie-detail-info">
      
      <h1 class="movie-title"><%= movie.name || 'N/A' %></h1>
      
      <div class="movie-meta">
        <span class="meta-item">
          <strong>RUNNING TIME</strong>
          <span><%= movie.duration ? movie.duration + ' mins' : 'N/A' %></span>
        </span>
        <span class="meta-item">
          <strong>RATING</strong>
          <span><%= movie.rating ? '⭐ ' + movie.rating : 'N/A' %></span>
        </span>
        <span class="meta-item">
          <strong>AGE RESTRICTION</strong>
          <span><%= movie.ageRestriction || 'N/A' %></span>
        </span>
      </div>

      <div class="detail-section">
        <h3>SYNOPSIS</h3>
        <p><%= movie.description || 'N/A' %></p>
      </div>

      <div class="detail-grid">
        
        <div class="detail-item">
          <span class="detail-label">DIRECTOR</span>
          <span class="detail-value"><%= movie.producer || 'N/A' %></span>
        </div>

        <div class="detail-item">
          <span class="detail-label">GENRE</span>
          <span class="detail-value">
            <%= movie.genre ? (Array.isArray(movie.genre) ? movie.genre.join(', ') : movie.genre) : 'N/A' %>
          </span>
        </div>

        <div class="detail-item">
          <span class="detail-label">LANGUAGE</span>
          <span class="detail-value"><%= movie.language || 'N/A' %></span>
        </div>

        <div class="detail-item">
          <span class="detail-label">SUBTITLES</span>
          <span class="detail-value"><%= movie.subtitle || 'N/A' %></span>
        </div>

        <div class="detail-item">
          <span class="detail-label">RELEASE DATE</span>
          <span class="detail-value">
            <%= movie.releaseDate ? new Date(movie.releaseDate).toLocaleDateString('en-US', { 
              weekday: 'short', 
              day: '2-digit', 
              month: 'short', 
              year: 'numeric' 
            }) : 'N/A' %>
          </span>
        </div>

        <div class="detail-item">
          <span class="detail-label">STATUS</span>
          <span class="detail-value"><%= movie.status || 'N/A' %></span>
        </div>

        <div class="detail-item full-width">
          <span class="detail-label">MAIN CAST</span>
          <span class="detail-value">
            <%= movie.cast ? (Array.isArray(movie.cast) ? movie.cast.join(', ') : movie.cast) : 'N/A' %>
          </span>
        </div>

      </div>

      <!-- Action Buttons -->
      <div class="movie-detail-actions">
        <a href="/movies" class="btn btn-secondary">
          ← Back to Movies
        </a>
        <a href="/movies/edit/<%= movie._id %>" class="btn btn-primary">
          <i class="bi bi-pencil-square"></i> Edit Movie
        </a>
      </div>

    </div>

  </div>

  <!-- Delete Form (separate, below) -->
  <div class="text-center mt-30">
    <form action="/movies/delete/<%= movie._id %>" method="POST" class="inline-block"
      onsubmit="return confirm('Are you sure you want to delete this movie?');">
      <button type="submit" class="btn btn-danger"><i class="bi bi-trash3"></i> Delete Movie</button>
    </form>
  </div>

</div>

  <%- include('../layouts/footer') %>